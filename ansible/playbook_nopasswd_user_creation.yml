- hosts: all
  vars:
    - sudo: no

  vars_prompt:
    - name: username
      prompt: Input new username
      private: no
      when: username is undefined

    - name: identity_file
      prompt: Input path of public identity file
      private: no
      default: "~/.ssh/id_rsa.pub"
      when: identity_file is undefined

  tasks:
    - include: roles/users/tasks/user_creation.yml
    - include: roles/users/tasks/ssh_copy_id.yml
    - include: roles/users/tasks/group_creation.yml groupname=nopasswd
    - include: roles/users/tasks/append_user_to_group.yml groupname=nopasswd
    - include: roles/users/tasks/sudo_without_password.yml groupname=nopasswd
